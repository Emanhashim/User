{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BAZRA\\\\Desktop\\\\Bazra project\\\\project react js\\\\dashix\\\\src\\\\pages\\\\Login.js\";\nimport React from 'react';\nimport { useState, useEffect } from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useHistory } from \"react-router-dom\";\nimport \"../components/FontawsomeIcons\";\nimport scrollreveal from \"scrollreveal\";\nimport { Form, Button } from 'semantic-ui-react';\nimport './Form.css';\nimport swal from 'sweetalert';\nimport { useForm } from \"react-hook-form\";\n\nconst Login = () => {\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n\n  const onSubmit = data => {\n    console.log(data);\n    login();\n  };\n\n  useEffect(() => {\n    const sr = scrollreveal({\n      origin: \"bottom\",\n      distance: \"80px\",\n      duration: 2000,\n      reset: false\n    });\n    sr.reveal(`\n      .form-container \n    `, {\n      opacity: 0,\n      interval: 100\n    });\n  }, []);\n  const history = useHistory();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  useEffect(() => {\n    if (localStorage.getItem(\"user-info\")) {}\n  }, []);\n\n  async function login() {\n    const users = {\n      username,\n      password\n    };\n    let item = {\n      username,\n      password\n    };\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        \"Accept\": \"application/json\",\n        \"Authorization\": `Bearer`\n      },\n      body: JSON.stringify(item)\n    };\n    const url = \"http://192.168.1.27:8080/api/signin/user\";\n\n    try {\n      const response = await fetch(url, options);\n      const result = await response.json();\n      localStorage.setItem('user', JSON.stringify(result['user']));\n      const user = localStorage.getItem('user');\n      console.log(user);\n      localStorage.setItem('user', JSON.stringify(users));\n\n      if (response.ok) {\n        console.log(\"Login successful\");\n        swal(\"Successful\", \"Welcom\", \"success\", {\n          buttons: false,\n          timer: 2000\n        }).then(value => {\n          localStorage.setItem('user', JSON.stringify(result['user']));\n          localStorage.getItem('user');\n          localStorage.setItem(\"jwt\", JSON.stringify(result['jwt']));\n          localStorage.getItem('jwt');\n          window.location.href = \"/Homex\";\n        }).then(json => json.items.map(item => {\n          return {\n            itemId: item.itemId,\n            name: item.name\n          };\n        }));\n      } else {\n        console.log(\"failed\");\n        swal(\"Failed\", \"Wrong Password or Email Address\", \"error\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n\n    let item2 = {\n      username,\n      password\n    };\n    const options2 = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        \"Accept\": \"application/json\",\n        \"Authorization\": `Bearer`\n      },\n      body: JSON.stringify(item2)\n    };\n    const url2 = \"http://192.168.1.27:8080/api/SignIn/Agent\";\n\n    try {\n      const response = await fetch(url, options);\n      const result = await response.json();\n      localStorage.setItem('user', JSON.stringify(result['user']));\n      const user = localStorage.getItem('user');\n      console.log(user);\n      localStorage.setItem('user', JSON.stringify(users));\n\n      if (response.ok) {\n        console.log(\"Login successful\");\n        swal(\"Successful\", \"Welcom\", \"success\", {\n          buttons: false,\n          timer: 2000\n        }).then(value => {\n          localStorage.setItem('user', JSON.stringify(result['user']));\n          localStorage.getItem('user');\n          localStorage.setItem(\"jwt\", JSON.stringify(result['jwt']));\n          localStorage.getItem('jwt');\n          window.location.href = \"/dAgent\";\n        });\n      } else {\n        console.log(\"failed\");\n        swal(\"Failed\", \"Wrong Password or Email Address\", \"error\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: '90vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"close-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-content-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-inputsx\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, \"Phone Number\"), /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    className: \"form-input\",\n    type: \"username\",\n    name: \"username\",\n    placeholder: \"Enter Your Phone Number\"\n  }, register(\"user\", {\n    required: true,\n    maxLength: 30\n  }), {\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  })), errors.user && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, \"UserName Required\"))), /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-inputsx\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    className: \"form-input\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Enter your password\"\n  }, register(\"pass\", {\n    required: true,\n    maxLength: 30\n  }), {\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form-input-login1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, \"Forgot password?\")), errors.pass && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 27\n    }\n  }, \"Password Required\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-inputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"form-input-btnx\",\n    type: \"sumbit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form-input-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, \"Dont't Hava an account? Register \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"sign-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 44\n    }\n  }, \"here\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/BAZRA/Desktop/Bazra project/project react js/dashix/src/pages/Login.js"],"names":["React","useState","useEffect","FontAwesomeIcon","useHistory","scrollreveal","Form","Button","swal","useForm","Login","register","handleSubmit","formState","errors","onSubmit","data","console","log","login","sr","origin","distance","duration","reset","reveal","opacity","interval","history","username","setUsername","password","setPassword","localStorage","getItem","users","item","options","method","headers","body","JSON","stringify","url","response","fetch","result","json","setItem","user","ok","buttons","timer","then","value","window","location","href","items","map","itemId","name","error","item2","options2","url2","display","justifyContent","alignItems","height","required","maxLength","e","target","pass"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState,useEffect } from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../components/FontawsomeIcons\"\r\nimport scrollreveal from \"scrollreveal\";\r\nimport { Form, Button } from 'semantic-ui-react';\r\nimport './Form.css';\r\nimport swal from 'sweetalert';\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nconst Login = () => {\r\n  const { register, handleSubmit, formState: { errors } } = useForm();\r\n    const onSubmit = (data) => {\r\n        console.log(data);\r\n     login();\r\n    \r\n    }\r\n\r\n\r\n  useEffect(() => {\r\n    const sr = scrollreveal({\r\n      origin: \"bottom\",\r\n      distance: \"80px\",\r\n      duration: 2000,\r\n      reset: false,\r\n    });\r\n    sr.reveal(\r\n      `\r\n      .form-container \r\n    `,\r\n      {\r\n        opacity: 0,\r\n        interval: 100,\r\n      }\r\n    );\r\n  }, []);\r\n  \r\n\r\n  const history=useHistory();\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    useEffect(()=>\r\n{\r\n  if(localStorage.getItem(\"user-info\")){\r\n     \r\n  }\r\n},[])\r\nasync function login(){\r\n  \r\n  \r\n  const users={username,password}\r\n \r\n  let item={username,password};\r\n \r\n const options={\r\n      method:'POST',\r\n      headers:{\r\n\r\n          'Content-Type':'application/json',\r\n          \"Accept\":\"application/json\",\r\n          \"Authorization\":`Bearer`\r\n         \r\n      },\r\n      body:JSON.stringify(item)\r\n      \r\n  }\r\n  const url =\"http://192.168.1.27:8080/api/signin/user\"\r\n  \r\n  try{\r\n   const response= await fetch(url,options);\r\n    const result =await response.json();\r\n   \r\n    localStorage.setItem('user', JSON.stringify(result['user']));\r\n\r\n \r\n const user= localStorage.getItem('user')\r\n console.log(user);\r\n  \r\n   localStorage.setItem('user', JSON.stringify(users))\r\n \r\nif(response.ok){\r\n  console.log(\"Login successful\")\r\n  swal(\"Successful\", \"Welcom\", \"success\", {\r\n    buttons: false,\r\n    timer: 2000,\r\n  }).then((value) => {\r\n    \r\n    localStorage.setItem('user', JSON.stringify(result['user']));\r\n    localStorage.getItem('user')\r\n  localStorage.setItem(\"jwt\", JSON.stringify(result['jwt']));\r\n  localStorage.getItem('jwt')\r\n  window.location.href = \"/Homex\";\r\n \r\n  \r\n  }\r\n  \r\n  \r\n  \r\n  \r\n  )\r\n  .then(json => json.items.map(item => {\r\n    return {\r\n      itemId: item.itemId,\r\n      name: item.name\r\n    }\r\n  }));\r\n  \r\n}else{\r\n  console.log(\"failed\")\r\nswal(\"Failed\", \"Wrong Password or Email Address\", \"error\")\r\n}\r\n}catch(error) {\r\n  console.error(error);\r\n}\r\n\r\nlet item2={username,password};\r\nconst options2={\r\n     method:'POST',\r\n     headers:{\r\n\r\n         'Content-Type':'application/json',\r\n         \"Accept\":\"application/json\",\r\n         \"Authorization\":`Bearer`\r\n        \r\n     },\r\n     body:JSON.stringify(item2)\r\n     \r\n }\r\n const url2 =\"http://192.168.1.27:8080/api/SignIn/Agent\"\r\n try{\r\n  const response= await fetch(url,options);\r\n   const result =await response.json();\r\n  \r\n   localStorage.setItem('user', JSON.stringify(result['user']));\r\n\r\n\r\nconst user= localStorage.getItem('user')\r\nconsole.log(user);\r\n \r\n  localStorage.setItem('user', JSON.stringify(users))\r\n\r\nif(response.ok){\r\n console.log(\"Login successful\")\r\n swal(\"Successful\", \"Welcom\", \"success\", {\r\n   buttons: false,\r\n   timer: 2000,\r\n }).then((value) => {\r\n   \r\n   localStorage.setItem('user', JSON.stringify(result['user']));\r\n   localStorage.getItem('user')\r\n   localStorage.setItem(\"jwt\", JSON.stringify(result['jwt']));\r\n   localStorage.getItem('jwt')\r\n   window.location.href = \"/dAgent\";\r\n\r\n \r\n });\r\n \r\n}else{\r\n console.log(\"failed\")\r\nswal(\"Failed\", \"Wrong Password or Email Address\", \"error\")\r\n}\r\n}catch(error) {\r\n console.error(error);\r\n}\r\n \r\n}\r\n\r\n  return (\r\n    \r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '90vh'\r\n      }}\r\n    >\r\n      \r\n        <div className='form-container'>\r\n        <span className='close-btn'>×</span>\r\n        <div className='form-content-left'>\r\n         \r\n        </div>\r\n    <div className=\"form\" >\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n        <h2>Sign in</h2>\r\n\r\n        <Form.Field>\r\n        <div className=\"form-inputsx\">\r\n         <FontAwesomeIcon icon=\"user\"/> \r\n          <label className=\"form-label\">Phone Number</label>\r\n          <input\r\n            className=\"form-input\"\r\n            type=\"username\"\r\n            name=\"username\"\r\n            placeholder=\"Enter Your Phone Number\"\r\n            {...register(\"user\", { required: true, maxLength: 30 })}\r\n            onChange={(e) => setUsername(e.target.value)} \r\n          />\r\n{errors.user && <p className=\"text-error\">UserName Required</p>}\r\n          \r\n        </div>\r\n        </Form.Field>\r\n    \r\n        <Form.Field>\r\n        <div className=\"form-inputsx\">\r\n        <FontAwesomeIcon icon=\"lock\"/> \r\n          <label className=\"form-label\">Password</label>\r\n          <input\r\n            className=\"form-input\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Enter your password\"\r\n            {...register(\"pass\", { required: true, maxLength: 30 })}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          /> \r\n          <span className=\"form-input-login1\">\r\n            <a href=\"/email\">Forgot password?</a>\r\n          </span>\r\n          {errors.pass && <p className=\"text-error\">Password Required</p>}\r\n        </div>\r\n        </Form.Field>\r\n\r\n        <div className=\"form-inputs\"></div>\r\n        <button className=\"form-input-btnx\" type='sumbit' >\r\n          Login\r\n        </button>\r\n        </form>\r\n        <span className=\"form-input-login\">\r\n          Dont't Hava an account? Register <a href=\"sign-up\">here</a>\r\n        </span>\r\n      </div>\r\n      \r\n     \r\n    </div>\r\n    \r\n    </div>\r\n    \r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}