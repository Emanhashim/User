{"ast":null,"code":"const _excluded = [\"id\", \"className\", \"containerClassName\", \"placeholder\", \"autoFocus\", \"textField\", \"dataKey\", \"autoSelectMatches\", \"focusFirstItem\", \"value\", \"defaultValue\", \"onChange\", \"open\", \"defaultOpen\", \"onToggle\", \"filter\", \"busy\", \"disabled\", \"readOnly\", \"selectIcon\", \"hideCaret\", \"hideEmptyPopup\", \"busySpinner\", \"dropUp\", \"tabIndex\", \"popupTransition\", \"name\", \"onSelect\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"inputProps\", \"listProps\", \"popupProps\", \"groupBy\", \"renderListItem\", \"renderListGroup\", \"optionComponent\", \"listComponent\", \"popupComponent\", \"data\", \"messages\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport cn from 'classnames';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { useUncontrolledProp } from 'uncontrollable';\nimport { caretDown } from './Icon';\nimport Input from './Input';\nimport List from './List';\nimport { FocusListContext, useFocusList } from './FocusListContext';\nimport BasePopup from './Popup';\nimport InputAddon from './InputAddon';\nimport Widget from './Widget';\nimport WidgetPicker from './WidgetPicker';\nimport { useMessagesWithDefaults } from './messages';\nimport { useActiveDescendant } from './A11y';\nimport * as CustomPropTypes from './PropTypes';\nimport { useAccessors } from './Accessors';\nimport { useFilteredData } from './Filter';\nimport useDropdownToggle from './useDropdownToggle';\nimport useFocusManager from './useFocusManager';\nimport { notify, useFirstFocusedRender, useInstanceId } from './WidgetHelpers';\nimport { Spinner } from './Icon';\n\nfunction indexOf(data, searchTerm, text) {\n  if (!searchTerm.trim()) return -1;\n\n  for (let idx = 0; idx < data.length; idx++) if (text(data[idx]).toLowerCase() === searchTerm) return idx;\n\n  return -1;\n}\n\nlet propTypes = {\n  value: PropTypes.any,\n  onChange: PropTypes.func,\n  open: PropTypes.bool,\n  onToggle: PropTypes.func,\n  renderListItem: PropTypes.func,\n  listComponent: PropTypes.elementType,\n  renderListGroup: PropTypes.func,\n  groupBy: CustomPropTypes.accessor,\n  data: PropTypes.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  name: PropTypes.string,\n\n  /** Do not show the auto complete list when it returns no results. */\n  hideEmptyPopup: PropTypes.bool,\n\n  /** Hide the combobox dropdown indicator. */\n  hideCaret: PropTypes.bool,\n\n  /**\n   *\n   * @type {(dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void}\n   */\n  onSelect: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n  busy: PropTypes.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: PropTypes.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: PropTypes.node,\n  dropUp: PropTypes.bool,\n  popupTransition: PropTypes.elementType,\n  placeholder: PropTypes.string,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: PropTypes.string,\n  inputProps: PropTypes.object,\n  listProps: PropTypes.object,\n  messages: PropTypes.shape({\n    openCombobox: CustomPropTypes.message,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message\n  })\n};\n/**\n * ---\n * shortcuts:\n *   - { key: alt + down arrow, label: open combobox }\n *   - { key: alt + up arrow, label: close combobox }\n *   - { key: down arrow, label: move focus to next item }\n *   - { key: up arrow, label: move focus to previous item }\n *   - { key: home, label: move focus to first item }\n *   - { key: end, label: move focus to last item }\n *   - { key: enter, label: select focused item }\n *   - { key: any key, label: search list for item starting with key }\n * ---\n *\n * Select an item from the list, or input a custom value. The Combobox can also make suggestions as you type.\n\n * @public\n */\n\nconst ComboboxImpl = /*#__PURE__*/React.forwardRef(function Combobox(_ref, outerRef) {\n  let {\n    id,\n    className,\n    containerClassName,\n    placeholder,\n    autoFocus,\n    textField,\n    dataKey,\n    autoSelectMatches,\n    focusFirstItem = false,\n    value,\n    defaultValue = '',\n    onChange,\n    open,\n    defaultOpen = false,\n    onToggle,\n    filter = true,\n    busy,\n    disabled,\n    readOnly,\n    selectIcon = caretDown,\n    hideCaret,\n    hideEmptyPopup,\n    busySpinner,\n    dropUp,\n    tabIndex,\n    popupTransition,\n    name,\n    onSelect,\n    onKeyDown,\n    onBlur,\n    onFocus,\n    inputProps,\n    listProps,\n    popupProps,\n    groupBy,\n    renderListItem,\n    renderListGroup,\n    optionComponent,\n    listComponent: ListComponent = List,\n    popupComponent: Popup = BasePopup,\n    data: rawData = [],\n    messages: userMessages\n  } = _ref,\n      elementProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  let [currentValue, handleChange] = useUncontrolledProp(value, defaultValue, onChange);\n  const [currentOpen, handleOpen] = useUncontrolledProp(open, defaultOpen, onToggle);\n  const ref = useRef(null);\n  const inputRef = useRef(null);\n  const listRef = useRef(null);\n  const [suggestion, setSuggestion] = useState(null);\n  const shouldFilter = useRef(false);\n  const inputId = useInstanceId(id, '_input');\n  const listId = useInstanceId(id, '_listbox');\n  const activeId = useInstanceId(id, '_listbox_active_option');\n  const accessors = useAccessors(textField, dataKey);\n  const messages = useMessagesWithDefaults(userMessages);\n  const toggle = useDropdownToggle(currentOpen, handleOpen);\n  const isDisabled = disabled === true;\n  const isReadOnly = !!readOnly;\n  const data = useFilteredData(rawData, filter, shouldFilter.current ? accessors.text(currentValue) : void 0, accessors.text);\n  const selectedItem = useMemo(() => data[accessors.indexOf(data, currentValue)], [data, currentValue, accessors]);\n  const list = useFocusList({\n    activeId,\n    scope: ref,\n    focusFirstItem,\n    anchorItem: currentOpen ? selectedItem : undefined\n  });\n  const [focusEvents, focused] = useFocusManager(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (!focused) {\n        shouldFilter.current = false;\n        toggle.close();\n        setSuggestion(null);\n        list.focus(undefined);\n      } else {\n        focus({\n          preventScroll: true\n        });\n      }\n    }\n\n  });\n  useActiveDescendant(ref, activeId, currentOpen, [list.getFocused()]);\n  /**\n   * Handlers\n   */\n\n  const handleClick = e => {\n    if (readOnly || isDisabled) return; // prevents double clicks when in a <label>\n\n    e.preventDefault();\n    focus();\n    toggle();\n  };\n\n  const handleSelect = (data, originalEvent) => {\n    toggle.close();\n    shouldFilter.current = false;\n    setSuggestion(null);\n    notify(onSelect, [data, {\n      originalEvent\n    }]);\n    change(data, originalEvent, true);\n    focus({\n      preventScroll: true\n    });\n  };\n\n  const handleInputKeyDown = ({\n    key\n  }) => {\n    if (key === 'Backspace' || key === 'Delete') {\n      list.focus(null);\n    }\n  };\n\n  const handleInputChange = event => {\n    let idx = autoSelectMatches ? indexOf(rawData, event.target.value.toLowerCase(), accessors.text) : -1;\n    shouldFilter.current = true;\n    setSuggestion(null);\n    const nextValue = idx === -1 ? event.target.value : rawData[idx];\n    change(nextValue, event);\n    if (!nextValue) toggle.close();else toggle.open();\n  };\n\n  const handleKeyDown = e => {\n    if (readOnly) return;\n    let {\n      key,\n      altKey,\n      shiftKey\n    } = e;\n    notify(onKeyDown, [e]);\n    if (e.defaultPrevented) return;\n\n    const select = item => item != null && handleSelect(item, e);\n\n    const setFocused = el => {\n      if (!el) return;\n      setSuggestion(list.toDataItem(el));\n      list.focus(el);\n    };\n\n    if (key === 'End' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      setFocused(list.last());\n    } else if (key === 'Home' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      setFocused(list.first());\n    } else if (key === 'Escape' && currentOpen) {\n      e.preventDefault();\n      setSuggestion(null);\n      toggle.close();\n    } else if (key === 'Enter' && currentOpen) {\n      e.preventDefault();\n      select(list.getFocused());\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n\n      if (currentOpen) {\n        setFocused(list.next());\n      } else {\n        return toggle.open();\n      }\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      if (altKey) return toggle.close();\n\n      if (currentOpen) {\n        setFocused(list.prev());\n      }\n    }\n  };\n  /**\n   * Methods\n   */\n\n\n  function focus(opts) {\n    if (inputRef.current) inputRef.current.focus(opts);\n  }\n\n  function change(nextValue, originalEvent, selected = false) {\n    handleChange(nextValue, {\n      lastValue: currentValue,\n      originalEvent,\n      source: selected ? 'listbox' : 'input'\n    });\n  }\n  /**\n   * Rendering\n   */\n\n\n  useImperativeHandle(outerRef, () => ({\n    focus\n  }));\n  let shouldRenderPopup = useFirstFocusedRender(focused, currentOpen);\n  let valueItem = accessors.findOrSelf(data, currentValue);\n  let inputValue = accessors.text(suggestion || valueItem);\n  let completeType = filter ? 'list' : 'none';\n  let popupOpen = currentOpen && (!hideEmptyPopup || !!data.length);\n  let inputReadOnly = // @ts-ignore\n  (inputProps == null ? void 0 : inputProps.readOnly) != null ? inputProps == null ? void 0 : inputProps.readOnly : readOnly;\n  let inputAddon = false;\n\n  if (!hideCaret) {\n    inputAddon = /*#__PURE__*/React.createElement(InputAddon, {\n      busy: busy,\n      icon: selectIcon,\n      spinner: busySpinner,\n      onClick: handleClick,\n      disabled: !!isDisabled || isReadOnly // FIXME\n      ,\n      label: messages.openCombobox()\n    });\n  } else if (busy) {\n    inputAddon = /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      className: \"rw-btn rw-picker-caret\"\n    }, busySpinner || Spinner);\n  }\n\n  return /*#__PURE__*/React.createElement(Widget, _extends({}, elementProps, {\n    ref: ref,\n    open: currentOpen,\n    dropUp: dropUp,\n    focused: focused,\n    disabled: isDisabled,\n    readOnly: isReadOnly\n  }, focusEvents, {\n    onKeyDown: handleKeyDown,\n    className: cn(className, 'rw-combobox')\n  }), /*#__PURE__*/React.createElement(WidgetPicker, {\n    className: cn(containerClassName, hideCaret && 'rw-widget-input', hideCaret && !busy && 'rw-hide-caret')\n  }, /*#__PURE__*/React.createElement(Input, _extends({}, inputProps, {\n    role: \"combobox\",\n    name: name,\n    id: inputId,\n    className: cn( // @ts-ignore\n    inputProps && inputProps.className, 'rw-combobox-input', !hideCaret && 'rw-widget-input'),\n    autoFocus: autoFocus,\n    tabIndex: tabIndex,\n    disabled: isDisabled,\n    readOnly: inputReadOnly,\n    \"aria-busy\": !!busy,\n    \"aria-owns\": listId,\n    \"aria-autocomplete\": completeType,\n    \"aria-expanded\": currentOpen,\n    \"aria-haspopup\": true,\n    placeholder: placeholder,\n    value: inputValue,\n    onChange: handleInputChange,\n    onKeyDown: handleInputKeyDown,\n    ref: inputRef\n  })), inputAddon), /*#__PURE__*/React.createElement(FocusListContext.Provider, {\n    value: list.context\n  }, shouldRenderPopup && /*#__PURE__*/React.createElement(Popup, _extends({}, popupProps, {\n    dropUp: dropUp,\n    open: popupOpen,\n    transition: popupTransition,\n    onEntering: () => listRef.current.scrollIntoView()\n  }), /*#__PURE__*/React.createElement(ListComponent, _extends({}, listProps, {\n    id: listId,\n    tabIndex: -1,\n    data: data,\n    groupBy: groupBy,\n    disabled: disabled,\n    accessors: accessors,\n    renderItem: renderListItem,\n    renderGroup: renderListGroup,\n    optionComponent: optionComponent,\n    value: selectedItem,\n    searchTerm: valueItem && accessors.text(valueItem) || '',\n    \"aria-hidden\": !popupOpen,\n    \"aria-labelledby\": inputId,\n    \"aria-live\": popupOpen ? 'polite' : void 0,\n    onChange: (d, meta) => handleSelect(d, meta.originalEvent),\n    ref: listRef,\n    messages: {\n      emptyList: rawData.length ? messages.emptyFilter : messages.emptyList\n    }\n  })))));\n});\nComboboxImpl.displayName = 'Combobox';\nComboboxImpl.propTypes = propTypes;\nexport default ComboboxImpl;","map":{"version":3,"sources":["C:/Users/nahom/Desktop/project/New folder/dashi/node_modules/react-widgets/esm/Combobox.js"],"names":["_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","cn","PropTypes","React","useImperativeHandle","useMemo","useRef","useState","useUncontrolledProp","caretDown","Input","List","FocusListContext","useFocusList","BasePopup","InputAddon","Widget","WidgetPicker","useMessagesWithDefaults","useActiveDescendant","CustomPropTypes","useAccessors","useFilteredData","useDropdownToggle","useFocusManager","notify","useFirstFocusedRender","useInstanceId","Spinner","data","searchTerm","text","trim","idx","toLowerCase","propTypes","value","any","onChange","func","open","bool","onToggle","renderListItem","listComponent","elementType","renderListGroup","groupBy","accessor","array","dataKey","textField","name","string","hideEmptyPopup","hideCaret","onSelect","autoFocus","disabled","acceptsArray","readOnly","busy","selectIcon","node","busySpinner","dropUp","popupTransition","placeholder","containerClassName","inputProps","object","listProps","messages","shape","openCombobox","message","emptyList","emptyFilter","ComboboxImpl","forwardRef","Combobox","_ref","outerRef","id","className","autoSelectMatches","focusFirstItem","defaultValue","defaultOpen","filter","tabIndex","onKeyDown","onBlur","onFocus","popupProps","optionComponent","ListComponent","popupComponent","Popup","rawData","userMessages","elementProps","currentValue","handleChange","currentOpen","handleOpen","ref","inputRef","listRef","suggestion","setSuggestion","shouldFilter","inputId","listId","activeId","accessors","toggle","isDisabled","isReadOnly","current","selectedItem","list","scope","anchorItem","undefined","focusEvents","focused","didHandle","close","focus","preventScroll","getFocused","handleClick","e","preventDefault","handleSelect","originalEvent","change","handleInputKeyDown","handleInputChange","event","nextValue","handleKeyDown","altKey","shiftKey","defaultPrevented","select","item","setFocused","el","toDataItem","last","first","next","prev","opts","selected","lastValue","shouldRenderPopup","valueItem","findOrSelf","inputValue","completeType","popupOpen","inputReadOnly","inputAddon","createElement","icon","spinner","onClick","label","role","Provider","context","transition","onEntering","scrollIntoView","renderItem","renderGroup","d","meta","displayName"],"mappings":"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","sourcesContent":["const _excluded = [\"id\", \"className\", \"containerClassName\", \"placeholder\", \"autoFocus\", \"textField\", \"dataKey\", \"autoSelectMatches\", \"focusFirstItem\", \"value\", \"defaultValue\", \"onChange\", \"open\", \"defaultOpen\", \"onToggle\", \"filter\", \"busy\", \"disabled\", \"readOnly\", \"selectIcon\", \"hideCaret\", \"hideEmptyPopup\", \"busySpinner\", \"dropUp\", \"tabIndex\", \"popupTransition\", \"name\", \"onSelect\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"inputProps\", \"listProps\", \"popupProps\", \"groupBy\", \"renderListItem\", \"renderListGroup\", \"optionComponent\", \"listComponent\", \"popupComponent\", \"data\", \"messages\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport cn from 'classnames';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { useUncontrolledProp } from 'uncontrollable';\nimport { caretDown } from './Icon';\nimport Input from './Input';\nimport List from './List';\nimport { FocusListContext, useFocusList } from './FocusListContext';\nimport BasePopup from './Popup';\nimport InputAddon from './InputAddon';\nimport Widget from './Widget';\nimport WidgetPicker from './WidgetPicker';\nimport { useMessagesWithDefaults } from './messages';\nimport { useActiveDescendant } from './A11y';\nimport * as CustomPropTypes from './PropTypes';\nimport { useAccessors } from './Accessors';\nimport { useFilteredData } from './Filter';\nimport useDropdownToggle from './useDropdownToggle';\nimport useFocusManager from './useFocusManager';\nimport { notify, useFirstFocusedRender, useInstanceId } from './WidgetHelpers';\nimport { Spinner } from './Icon';\n\nfunction indexOf(data, searchTerm, text) {\n  if (!searchTerm.trim()) return -1;\n\n  for (let idx = 0; idx < data.length; idx++) if (text(data[idx]).toLowerCase() === searchTerm) return idx;\n\n  return -1;\n}\n\nlet propTypes = {\n  value: PropTypes.any,\n  onChange: PropTypes.func,\n  open: PropTypes.bool,\n  onToggle: PropTypes.func,\n  renderListItem: PropTypes.func,\n  listComponent: PropTypes.elementType,\n  renderListGroup: PropTypes.func,\n  groupBy: CustomPropTypes.accessor,\n  data: PropTypes.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  name: PropTypes.string,\n\n  /** Do not show the auto complete list when it returns no results. */\n  hideEmptyPopup: PropTypes.bool,\n\n  /** Hide the combobox dropdown indicator. */\n  hideCaret: PropTypes.bool,\n\n  /**\n   *\n   * @type {(dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void}\n   */\n  onSelect: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n  busy: PropTypes.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: PropTypes.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: PropTypes.node,\n  dropUp: PropTypes.bool,\n  popupTransition: PropTypes.elementType,\n  placeholder: PropTypes.string,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: PropTypes.string,\n  inputProps: PropTypes.object,\n  listProps: PropTypes.object,\n  messages: PropTypes.shape({\n    openCombobox: CustomPropTypes.message,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message\n  })\n};\n\n/**\n * ---\n * shortcuts:\n *   - { key: alt + down arrow, label: open combobox }\n *   - { key: alt + up arrow, label: close combobox }\n *   - { key: down arrow, label: move focus to next item }\n *   - { key: up arrow, label: move focus to previous item }\n *   - { key: home, label: move focus to first item }\n *   - { key: end, label: move focus to last item }\n *   - { key: enter, label: select focused item }\n *   - { key: any key, label: search list for item starting with key }\n * ---\n *\n * Select an item from the list, or input a custom value. The Combobox can also make suggestions as you type.\n\n * @public\n */\nconst ComboboxImpl = /*#__PURE__*/React.forwardRef(function Combobox(_ref, outerRef) {\n  let {\n    id,\n    className,\n    containerClassName,\n    placeholder,\n    autoFocus,\n    textField,\n    dataKey,\n    autoSelectMatches,\n    focusFirstItem = false,\n    value,\n    defaultValue = '',\n    onChange,\n    open,\n    defaultOpen = false,\n    onToggle,\n    filter = true,\n    busy,\n    disabled,\n    readOnly,\n    selectIcon = caretDown,\n    hideCaret,\n    hideEmptyPopup,\n    busySpinner,\n    dropUp,\n    tabIndex,\n    popupTransition,\n    name,\n    onSelect,\n    onKeyDown,\n    onBlur,\n    onFocus,\n    inputProps,\n    listProps,\n    popupProps,\n    groupBy,\n    renderListItem,\n    renderListGroup,\n    optionComponent,\n    listComponent: ListComponent = List,\n    popupComponent: Popup = BasePopup,\n    data: rawData = [],\n    messages: userMessages\n  } = _ref,\n      elementProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  let [currentValue, handleChange] = useUncontrolledProp(value, defaultValue, onChange);\n  const [currentOpen, handleOpen] = useUncontrolledProp(open, defaultOpen, onToggle);\n  const ref = useRef(null);\n  const inputRef = useRef(null);\n  const listRef = useRef(null);\n  const [suggestion, setSuggestion] = useState(null);\n  const shouldFilter = useRef(false);\n  const inputId = useInstanceId(id, '_input');\n  const listId = useInstanceId(id, '_listbox');\n  const activeId = useInstanceId(id, '_listbox_active_option');\n  const accessors = useAccessors(textField, dataKey);\n  const messages = useMessagesWithDefaults(userMessages);\n  const toggle = useDropdownToggle(currentOpen, handleOpen);\n  const isDisabled = disabled === true;\n  const isReadOnly = !!readOnly;\n  const data = useFilteredData(rawData, filter, shouldFilter.current ? accessors.text(currentValue) : void 0, accessors.text);\n  const selectedItem = useMemo(() => data[accessors.indexOf(data, currentValue)], [data, currentValue, accessors]);\n  const list = useFocusList({\n    activeId,\n    scope: ref,\n    focusFirstItem,\n    anchorItem: currentOpen ? selectedItem : undefined\n  });\n  const [focusEvents, focused] = useFocusManager(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (!focused) {\n        shouldFilter.current = false;\n        toggle.close();\n        setSuggestion(null);\n        list.focus(undefined);\n      } else {\n        focus({\n          preventScroll: true\n        });\n      }\n    }\n\n  });\n  useActiveDescendant(ref, activeId, currentOpen, [list.getFocused()]);\n  /**\n   * Handlers\n   */\n\n  const handleClick = e => {\n    if (readOnly || isDisabled) return; // prevents double clicks when in a <label>\n\n    e.preventDefault();\n    focus();\n    toggle();\n  };\n\n  const handleSelect = (data, originalEvent) => {\n    toggle.close();\n    shouldFilter.current = false;\n    setSuggestion(null);\n    notify(onSelect, [data, {\n      originalEvent\n    }]);\n    change(data, originalEvent, true);\n    focus({\n      preventScroll: true\n    });\n  };\n\n  const handleInputKeyDown = ({\n    key\n  }) => {\n    if (key === 'Backspace' || key === 'Delete') {\n      list.focus(null);\n    }\n  };\n\n  const handleInputChange = event => {\n    let idx = autoSelectMatches ? indexOf(rawData, event.target.value.toLowerCase(), accessors.text) : -1;\n    shouldFilter.current = true;\n    setSuggestion(null);\n    const nextValue = idx === -1 ? event.target.value : rawData[idx];\n    change(nextValue, event);\n    if (!nextValue) toggle.close();else toggle.open();\n  };\n\n  const handleKeyDown = e => {\n    if (readOnly) return;\n    let {\n      key,\n      altKey,\n      shiftKey\n    } = e;\n    notify(onKeyDown, [e]);\n    if (e.defaultPrevented) return;\n\n    const select = item => item != null && handleSelect(item, e);\n\n    const setFocused = el => {\n      if (!el) return;\n      setSuggestion(list.toDataItem(el));\n      list.focus(el);\n    };\n\n    if (key === 'End' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      setFocused(list.last());\n    } else if (key === 'Home' && currentOpen && !shiftKey) {\n      e.preventDefault();\n      setFocused(list.first());\n    } else if (key === 'Escape' && currentOpen) {\n      e.preventDefault();\n      setSuggestion(null);\n      toggle.close();\n    } else if (key === 'Enter' && currentOpen) {\n      e.preventDefault();\n      select(list.getFocused());\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n\n      if (currentOpen) {\n        setFocused(list.next());\n      } else {\n        return toggle.open();\n      }\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      if (altKey) return toggle.close();\n\n      if (currentOpen) {\n        setFocused(list.prev());\n      }\n    }\n  };\n  /**\n   * Methods\n   */\n\n\n  function focus(opts) {\n    if (inputRef.current) inputRef.current.focus(opts);\n  }\n\n  function change(nextValue, originalEvent, selected = false) {\n    handleChange(nextValue, {\n      lastValue: currentValue,\n      originalEvent,\n      source: selected ? 'listbox' : 'input'\n    });\n  }\n  /**\n   * Rendering\n   */\n\n\n  useImperativeHandle(outerRef, () => ({\n    focus\n  }));\n  let shouldRenderPopup = useFirstFocusedRender(focused, currentOpen);\n  let valueItem = accessors.findOrSelf(data, currentValue);\n  let inputValue = accessors.text(suggestion || valueItem);\n  let completeType = filter ? 'list' : 'none';\n  let popupOpen = currentOpen && (!hideEmptyPopup || !!data.length);\n  let inputReadOnly = // @ts-ignore\n  (inputProps == null ? void 0 : inputProps.readOnly) != null ? inputProps == null ? void 0 : inputProps.readOnly : readOnly;\n  let inputAddon = false;\n\n  if (!hideCaret) {\n    inputAddon = /*#__PURE__*/React.createElement(InputAddon, {\n      busy: busy,\n      icon: selectIcon,\n      spinner: busySpinner,\n      onClick: handleClick,\n      disabled: !!isDisabled || isReadOnly // FIXME\n      ,\n      label: messages.openCombobox()\n    });\n  } else if (busy) {\n    inputAddon = /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      className: \"rw-btn rw-picker-caret\"\n    }, busySpinner || Spinner);\n  }\n\n  return /*#__PURE__*/React.createElement(Widget, _extends({}, elementProps, {\n    ref: ref,\n    open: currentOpen,\n    dropUp: dropUp,\n    focused: focused,\n    disabled: isDisabled,\n    readOnly: isReadOnly\n  }, focusEvents, {\n    onKeyDown: handleKeyDown,\n    className: cn(className, 'rw-combobox')\n  }), /*#__PURE__*/React.createElement(WidgetPicker, {\n    className: cn(containerClassName, hideCaret && 'rw-widget-input', hideCaret && !busy && 'rw-hide-caret')\n  }, /*#__PURE__*/React.createElement(Input, _extends({}, inputProps, {\n    role: \"combobox\",\n    name: name,\n    id: inputId,\n    className: cn( // @ts-ignore\n    inputProps && inputProps.className, 'rw-combobox-input', !hideCaret && 'rw-widget-input'),\n    autoFocus: autoFocus,\n    tabIndex: tabIndex,\n    disabled: isDisabled,\n    readOnly: inputReadOnly,\n    \"aria-busy\": !!busy,\n    \"aria-owns\": listId,\n    \"aria-autocomplete\": completeType,\n    \"aria-expanded\": currentOpen,\n    \"aria-haspopup\": true,\n    placeholder: placeholder,\n    value: inputValue,\n    onChange: handleInputChange,\n    onKeyDown: handleInputKeyDown,\n    ref: inputRef\n  })), inputAddon), /*#__PURE__*/React.createElement(FocusListContext.Provider, {\n    value: list.context\n  }, shouldRenderPopup && /*#__PURE__*/React.createElement(Popup, _extends({}, popupProps, {\n    dropUp: dropUp,\n    open: popupOpen,\n    transition: popupTransition,\n    onEntering: () => listRef.current.scrollIntoView()\n  }), /*#__PURE__*/React.createElement(ListComponent, _extends({}, listProps, {\n    id: listId,\n    tabIndex: -1,\n    data: data,\n    groupBy: groupBy,\n    disabled: disabled,\n    accessors: accessors,\n    renderItem: renderListItem,\n    renderGroup: renderListGroup,\n    optionComponent: optionComponent,\n    value: selectedItem,\n    searchTerm: valueItem && accessors.text(valueItem) || '',\n    \"aria-hidden\": !popupOpen,\n    \"aria-labelledby\": inputId,\n    \"aria-live\": popupOpen ? 'polite' : void 0,\n    onChange: (d, meta) => handleSelect(d, meta.originalEvent),\n    ref: listRef,\n    messages: {\n      emptyList: rawData.length ? messages.emptyFilter : messages.emptyList\n    }\n  })))));\n});\nComboboxImpl.displayName = 'Combobox';\nComboboxImpl.propTypes = propTypes;\nexport default ComboboxImpl;"]},"metadata":{},"sourceType":"module"}